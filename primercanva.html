<!DOCTYPE html>
<html lang="en">

<head>
   <meta charset="UTF-8">
   <meta http-equiv="X-UA-Compatible" content="IE=edge">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>Castro Cota Raul Aloisy</title>

</head>
<style>
    #mycanvas{
        border: 1px solid black;
        background-color: white;
    }
</style>

<body style="background-color: rgb(158, 142, 142)">

  <center> <canvas id="mycanvas"  width="500" height="500"> </canvas> </center> 
    <img id="img" src="pensando.png" style="display: none;" / >
</body>

<script>
    var clickArriba = true;;
    var figura = true;
    var color;
    var canvas = document.getElementById('mycanvas'); 
    var ctx = canvas.getContext('2d');
    var x =200 , y =200;
    var dir=0;




    function random_rgba() {
        var o = Math.round, r = Math.random, s = 255;
        return 'rgba(' + o(r()*s) + ',' + o(r()*s) + ',' + o(r()*s) + ',' + r().toFixed(1) + ')';
    }

    function getRandomInt(max) {
        return Math.floor(Math.random() * max);
    }

    function repaint(){
     
        ctx.fillStyle = "aliceblue";
        ctx.fillRect ( 0, 0,1000,1000);
                    ctx.fillStyle = random_rgba();
                ctx.fillRect ( x, y,40,40);
    }

        ctx.beginPath();
        ctx.fillStyle = "Black";
        ctx.fillRect (x,y  , 50, 50);
        ctx.strokeRect(x, y,50,50);
        ctx.closePath();
    document.addEventListener("keydown", (e) => {

        switch(e.keyCode){
            case 87:
            dir=e.keyCode;
                y-=9;
                break;
            case 65:    
            dir=e.keyCode;
                x-=9;
                break;
            case 83:
            dir=e.keyCode;
                y+=9;
                 break;
            case 68:
            dir=e.keyCode;
                 x+=9;
                 break;

             default:
                 break;
        };
    });
        function update(){

            switch (dir) {
                case 87:  
                    y -= 8;
                    if(y<-50){y=550}
                    break;
    
                case 83:
                    y += 8;
                    if(y>550){y=0}
                    break;
    
                case 68:
                    x += 8;
                    if(x>550){x=0}
                    break;
    
                    case 65:
                    x -= 8;
                    if(x<-50){x=550}
                    break;
    
                default:
                    break;
                }

            repaint();
            window.requestAnimationFrame(update);    
        }
     

            
         


        window.requestAnimationFrame = (function () {
            return window.requestAnimationFrame ||
                window.webkitRequestAnimationFrame ||
                window.mozRequestAnimationFrame ||
                function (callback) {
                    window.setTimeout(callback, 17);
                };
        }());
        window.requestAnimationFrame(update);    

</script>

</html>